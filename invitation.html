<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <!-- åŸºç¡€ä¿¡æ¯ -->
    <title>æ´»åŠ¨è¯·æŸ¬</title>
    <meta name="description" content="æ¬¢è¿å‚åŠ æˆ‘ä»¬çš„æ´»åŠ¨ï¼">
    
    <!-- å¾®ä¿¡åˆ†äº« Meta æ ‡ç­¾ -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="æ´»åŠ¨è¯·æŸ¬">
    <meta property="og:description" content="æ¬¢è¿å‚åŠ æˆ‘ä»¬çš„æ´»åŠ¨ï¼ç‚¹å‡»æŸ¥çœ‹æ´»åŠ¨åœ°ç‚¹å’Œå¯¼èˆªä¿¡æ¯ã€‚">
    <meta property="og:image" content="https://via.placeholder.com/600x400/667eea/ffffff?text=æ´»åŠ¨è¯·æŸ¬">
    <meta property="og:url" content="">
    <meta property="og:site_name" content="æ´»åŠ¨è¯·æŸ¬">
    
    <!-- å¾®ä¿¡ç‰¹æ®Šæ ‡ç­¾ï¼ˆä¼˜å…ˆçº§æ›´é«˜ï¼‰ -->
    <meta itemprop="name" content="æ´»åŠ¨è¯·æŸ¬">
    <meta itemprop="description" content="æ¬¢è¿å‚åŠ æˆ‘ä»¬çš„æ´»åŠ¨ï¼ç‚¹å‡»æŸ¥çœ‹æ´»åŠ¨åœ°ç‚¹å’Œå¯¼èˆªä¿¡æ¯ã€‚">
    <meta itemprop="image" content="https://via.placeholder.com/600x400/667eea/ffffff?text=æ´»åŠ¨è¯·æŸ¬">
    
    <!-- å…¼å®¹å¾®ä¿¡æµè§ˆå™¨ -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- å¾®ä¿¡JS-SDKï¼ˆç”¨äºè°ƒç”¨å¾®ä¿¡å†…ç½®åœ°å›¾ï¼‰ -->
    <script src="https://res.wx.qq.com/open/js/jweixin-1.6.0.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
            background: white;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            -webkit-overflow-scrolling: touch;
            /* é˜²æ­¢å¾®ä¿¡ä¸­ä¸‹æ‹‰å‡ºç°èƒŒæ™¯ */
            overscroll-behavior-y: none;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            max-width: 600px;
            width: 100%;
            overflow: hidden;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .image-container {
            width: 100%;
            position: relative;
            overflow: hidden;
        }

        .invitation-image {
            width: 100%;
            height: auto;
            display: block;
            object-fit: cover;
            image-rendering: -webkit-optimize-contrast;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }

        .location-section {
            padding: 30px;
            text-align: center;
        }

        .location-title {
            font-size: 24px;
            color: #333;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .location-address {
            font-size: 16px;
            color: #666;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        /* åœ°å›¾å›¾ç‰‡æ ·å¼ */
        .location-map-image {
            width: 100%;
            max-width: 100%;
            height: auto;
            border-radius: 12px;
            margin: 20px 0;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
            display: block;
        }

        .location-map-image:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
        }

        .location-map-image:active {
            transform: translateY(0);
        }

        .nav-buttons {
            display: none; /* éšè—å¯¼èˆªæŒ‰é’® */
            flex-wrap: wrap;
            gap: 12px;
            justify-content: center;
            margin-top: 20px;
        }

        .nav-button {
            flex: 1;
            min-width: 140px;
            padding: 14px 20px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            color: white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .nav-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
        }

        .nav-button:active {
            transform: translateY(0);
        }

        .amap {
            background: linear-gradient(135deg, #0091ff 0%, #0066cc 100%);
        }

        .baidu {
            background: linear-gradient(135deg, #3385ff 0%, #1a6fd8 100%);
        }

        .tencent {
            background: linear-gradient(135deg, #0ba58c 0%, #088a75 100%);
        }

        .apple {
            background: linear-gradient(135deg, #000000 0%, #333333 100%);
        }

        .google {
            background: linear-gradient(135deg, #4285f4 0%, #1976d2 100%);
        }

        .icon {
            width: 20px;
            height: 20px;
            display: inline-block;
        }

        /* å¾®ä¿¡æµè§ˆå™¨ä¼˜åŒ– */
        @media (max-width: 600px) {
            body {
                padding: 10px;
            }

            .container {
                border-radius: 15px;
            }

            .location-section {
                padding: 20px 15px;
            }

            .nav-button {
                min-width: 100%;
                padding: 16px 20px;
                font-size: 17px;
            }

            .location-title {
                font-size: 20px;
                margin-bottom: 12px;
            }

            .location-address {
                font-size: 15px;
                margin-bottom: 20px;
            }
        }

    </style>
</head>
<body>
    <div class="container">
        <!-- è¯·æŸ¬å›¾ç‰‡åŒºåŸŸ -->
        <div class="image-container">
            <!-- æ›¿æ¢ä¸‹é¢çš„å›¾ç‰‡URLä¸ºæ‚¨çš„è¯·æŸ¬å›¾ç‰‡ -->
            <img src="https://via.placeholder.com/600x400/667eea/ffffff?text=æ´»åŠ¨è¯·æŸ¬" 
                 alt="æ´»åŠ¨è¯·æŸ¬" 
                 class="invitation-image"
                 id="invitationImage">
        </div>

        <!-- å¯¼èˆªåŒºåŸŸ -->
        <div class="location-section">
            <h2 class="location-title">ğŸ“ æ´»åŠ¨åœ°ç‚¹</h2>
            <p class="location-address" id="locationAddress">
                åŒ—äº¬å¸‚æœé˜³åŒºXXè·¯XXå·XXå¤§å¦
            </p>
            
            <!-- å¯ç‚¹å‡»çš„åœ°å›¾å›¾ç‰‡ -->
            <img src="https://uuumr.github.io/engagement-invitation/hotel_map.png" 
                 alt="é…’åº—ä½ç½®åœ°å›¾" 
                 class="location-map-image"
                 id="locationMapImage"
                 onclick="openWeChatMap(); return false;"
                 title="ç‚¹å‡»æŸ¥çœ‹åœ°å›¾ä½ç½®">
            
            <div class="nav-buttons">
                <a href="#" class="nav-button amap" onclick="openNavigation('amap'); return false;">
                    <span>ğŸ—ºï¸</span>
                    <span>é«˜å¾·åœ°å›¾</span>
                </a>
                <a href="#" class="nav-button baidu" onclick="openNavigation('baidu'); return false;">
                    <span>ğŸ“</span>
                    <span>ç™¾åº¦åœ°å›¾</span>
                </a>
                <a href="#" class="nav-button tencent" onclick="openNavigation('tencent'); return false;">
                    <span>ğŸ§­</span>
                    <span>è…¾è®¯åœ°å›¾</span>
                </a>
                <a href="#" class="nav-button apple" onclick="openNavigation('apple'); return false;">
                    <span>ğŸ</span>
                    <span>è‹¹æœåœ°å›¾</span>
                </a>
                <a href="#" class="nav-button google" onclick="openNavigation('google'); return false;">
                    <span>ğŸŒ</span>
                    <span>è°·æ­Œåœ°å›¾</span>
                </a>
            </div>
        </div>
    </div>

    <script>
        // ==================== é…ç½®åŒºåŸŸ ====================
        // è¯·ä¿®æ”¹ä»¥ä¸‹é…ç½®ä¸ºæ‚¨å®é™…çš„åœ°ç‚¹ä¿¡æ¯

        // åœ°ç‚¹åç§°ï¼ˆç”¨äºåœ°å›¾æœç´¢ï¼‰
        const LOCATION_NAME = "æ¹–å·æ°´å²¸èŠ±å›­å¤§é…’åº—(åŒæ—å¤é•‡æ™¯åŒºåº—)";

        // ==================== åæ ‡è®¾ç½® ====================
        // ç»çº¬åº¦åæ ‡ï¼ˆå»ºè®®å¡«å†™ï¼Œæå‡å®šä½ç²¾åº¦ï¼‰
        // 
        // ğŸ“ å¦‚ä½•è·å–åæ ‡ï¼š
        // 1. æ‰“å¼€é«˜å¾·åœ°å›¾ç½‘é¡µï¼šhttps://lbs.amap.com/tools/picker
        // 2. ç‚¹å‡»åœ°å›¾ä¸Šçš„ä½ç½®ï¼Œå³ä¾§ä¼šæ˜¾ç¤ºåæ ‡ï¼Œæ ¼å¼å¦‚ï¼š116.397128,39.916527
        // 3. âš ï¸ æ³¨æ„ï¼šé«˜å¾·åœ°å›¾æ˜¾ç¤ºçš„æ˜¯"ç»åº¦,çº¬åº¦"æ ¼å¼
        //    ç¬¬ä¸€ä¸ªæ•°å­—æ˜¯ç»åº¦ï¼ˆå¡«åˆ°longitudeï¼‰ï¼Œç¬¬äºŒä¸ªæ•°å­—æ˜¯çº¬åº¦ï¼ˆå¡«åˆ°latitudeï¼‰
        // 4. åˆ¤æ–­æ–¹æ³•ï¼š
        //    - ç»åº¦(longitude)ï¼šé€šå¸¸æ˜¯å¤§æ•°å­—ï¼ˆä¸­å›½ï¼š100-135ï¼‰
        //    - çº¬åº¦(latitude)ï¼šé€šå¸¸æ˜¯å°æ•°å­—ï¼ˆä¸­å›½ï¼š18-54ï¼‰
        //
        // æˆ–è€…ï¼šå¦‚æœä¸è®¾ç½®åæ ‡ï¼Œä¹Ÿå¯ä»¥åªä½¿ç”¨åœ°ç‚¹åç§°ï¼ˆä½†å®šä½å¯èƒ½ä¸å¤Ÿç²¾ç¡®ï¼‰
        // 
        // ç¤ºä¾‹åæ ‡ï¼š
        // åŒ—äº¬å¤©å®‰é—¨: longitude: 116.397128, latitude: 39.916527
        // ä¸Šæµ·å¤–æ»©:   longitude: 121.487899, latitude: 31.239666
        // 
        const LOCATION_COORDINATES = {
            longitude: 120.332731,  // ç»åº¦ï¼ˆä¸œç»ï¼Œä¸­å›½é€šå¸¸ä¸º116-124ä¹‹é—´ï¼‰
            latitude: 30.772340     // çº¬åº¦ï¼ˆåŒ—çº¬ï¼Œä¸­å›½é€šå¸¸ä¸º18-54ä¹‹é—´ï¼‰
        };
        //
        // å¦‚æœæ²¡æœ‰åæ ‡ï¼Œå¯ä»¥è®¾ç½®ä¸º nullï¼ˆä¸æ¨èï¼‰ï¼š
        // longitude: null,
        // latitude: null

        // è¯·æŸ¬å›¾ç‰‡URLï¼ˆæ›¿æ¢ä¸ºæ‚¨è‡ªå·±çš„å›¾ç‰‡é“¾æ¥ï¼‰
        const INVITATION_IMAGE_URL = "https://uuumr.github.io/engagement-invitation/invitation_card_low.jpg";

        // å¾®ä¿¡åˆ†äº«é…ç½®ï¼ˆè¯·ä¿®æ”¹è¿™äº›ä¿¡æ¯ï¼‰
        const SHARE_CONFIG = {
            title: "æ´»åŠ¨è¯·æŸ¬",
            desc: "æ¬¢è¿å‚åŠ æˆ‘ä»¬çš„æ´»åŠ¨ï¼",
            imgUrl: INVITATION_IMAGE_URL  // åˆ†äº«é¢„è§ˆå›¾çš„URLï¼Œå»ºè®®å°ºå¯¸ï¼š300x300 æˆ–æ›´å¤§
        };

        // ==================== ä»£ç åŒºåŸŸï¼ˆæ— éœ€ä¿®æ”¹ï¼‰====================

        // åæ ‡éªŒè¯å‡½æ•°ï¼ˆæ£€æŸ¥ç»çº¬åº¦æ˜¯å¦å¡«åï¼‰
        function validateCoordinates() {
            const lng = LOCATION_COORDINATES.longitude;
            const lat = LOCATION_COORDINATES.latitude;
            
            if (lng && lat) {
                // ä¸­å›½ç»åº¦èŒƒå›´ï¼š73-135ï¼ˆä¸œç»ï¼‰
                // ä¸­å›½çº¬åº¦èŒƒå›´ï¼š18-54ï¼ˆåŒ—çº¬ï¼‰
                // å¦‚æœå‘ç°åæ ‡å¯èƒ½å¡«åäº†ï¼Œç»™å‡ºæç¤º
                if (lng > 18 && lng < 54 && lat > 73 && lat < 135) {
                    console.warn('âš ï¸ è­¦å‘Šï¼šç»çº¬åº¦å¯èƒ½å¡«åäº†ï¼');
                    console.warn('   ç»åº¦(longitude)åº”è¯¥åœ¨ 73-135 ä¹‹é—´ï¼ˆå½“å‰ï¼š' + lng + 'ï¼‰');
                    console.warn('   çº¬åº¦(latitude)åº”è¯¥åœ¨ 18-54 ä¹‹é—´ï¼ˆå½“å‰ï¼š' + lat + 'ï¼‰');
                    console.warn('   è¯·æ£€æŸ¥åæ ‡æ˜¯å¦æ­£ç¡®ï¼');
                } else if (lng < 73 || lng > 135) {
                    console.warn('âš ï¸ è­¦å‘Šï¼šç»åº¦(longitude)å€¼å¼‚å¸¸ï¼ä¸­å›½ç»åº¦é€šå¸¸åœ¨ 73-135 ä¹‹é—´ï¼Œå½“å‰å€¼ï¼š' + lng);
                } else if (lat < 18 || lat > 54) {
                    console.warn('âš ï¸ è­¦å‘Šï¼šçº¬åº¦(latitude)å€¼å¼‚å¸¸ï¼ä¸­å›½çº¬åº¦é€šå¸¸åœ¨ 18-54 ä¹‹é—´ï¼Œå½“å‰å€¼ï¼š' + lat);
                }
            }
        }

        // åˆå§‹åŒ–å›¾ç‰‡
        document.getElementById('invitationImage').src = INVITATION_IMAGE_URL;
        document.getElementById('locationAddress').textContent = LOCATION_NAME;
        
        // éªŒè¯åæ ‡
        validateCoordinates();

        // æ›´æ–°å¾®ä¿¡åˆ†äº«çš„metaæ ‡ç­¾
        function updateWeChatShareMeta() {
            const titleMeta = document.querySelector('meta[property="og:title"]');
            const descMeta = document.querySelector('meta[property="og:description"]');
            const imgMeta = document.querySelector('meta[property="og:image"]');
            const urlMeta = document.querySelector('meta[property="og:url"]');

            if (titleMeta) titleMeta.setAttribute('content', SHARE_CONFIG.title);
            if (descMeta) descMeta.setAttribute('content', SHARE_CONFIG.desc);
            if (imgMeta) imgMeta.setAttribute('content', SHARE_CONFIG.imgUrl);
            if (urlMeta) urlMeta.setAttribute('content', window.location.href);

            // æ›´æ–°itemprop
            const itemName = document.querySelector('meta[itemprop="name"]');
            const itemDesc = document.querySelector('meta[itemprop="description"]');
            const itemImg = document.querySelector('meta[itemprop="image"]');
            
            if (itemName) itemName.setAttribute('content', SHARE_CONFIG.title);
            if (itemDesc) itemDesc.setAttribute('content', SHARE_CONFIG.desc);
            if (itemImg) itemImg.setAttribute('content', SHARE_CONFIG.imgUrl);
            
            // æ›´æ–°title
            document.title = SHARE_CONFIG.title;
        }

        // æ£€æµ‹æ˜¯å¦åœ¨å¾®ä¿¡ä¸­æ‰“å¼€
        function isWeChat() {
            const ua = navigator.userAgent.toLowerCase();
            return /micromessenger/i.test(ua);
        }

        // å¾®ä¿¡ä¸­ä¼˜åŒ–å¯¼èˆªæŒ‰é’®ç‚¹å‡»
        function optimizeNavigationForWeChat() {
            const navButtons = document.querySelectorAll('.nav-button');
            navButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    // å¾®ä¿¡ä¸­ç‚¹å‡»åå¯èƒ½éœ€è¦ç”¨æˆ·æ‰‹åŠ¨æ‰“å¼€åœ°å›¾åº”ç”¨
                    if (isWeChat()) {
                        // å¯ä»¥æ·»åŠ æç¤º
                        console.log('å¾®ä¿¡ä¸­æ‰“å¼€åœ°å›¾ï¼Œå¯èƒ½éœ€è¦è·³è½¬åˆ°æµè§ˆå™¨');
                    }
                });
            });
        }

        // æ‰“å¼€å¾®ä¿¡åœ°å›¾ï¼ˆä¸“é—¨ç”¨äºç‚¹å‡»åœ°å›¾å›¾ç‰‡ï¼‰
        function openWeChatMap() {
            let lng = LOCATION_COORDINATES.longitude;
            let lat = LOCATION_COORDINATES.latitude;
            const name = LOCATION_NAME;
            
            // è‡ªåŠ¨æ£€æµ‹å¹¶ä¿®å¤å¯èƒ½çš„åæ ‡åè½¬é—®é¢˜
            if (lng && lat) {
                if (lng >= 18 && lng <= 54 && lat >= 73 && lat <= 135) {
                    console.warn('è‡ªåŠ¨ä¿®å¤ï¼šæ£€æµ‹åˆ°ç»çº¬åº¦å¯èƒ½å¡«åï¼Œå·²è‡ªåŠ¨äº¤æ¢');
                    const temp = lng;
                    lng = lat;
                    lat = temp;
                }
            }

            if (!lng || !lat) {
                alert('æœªè®¾ç½®åæ ‡ï¼Œæ— æ³•æ‰“å¼€åœ°å›¾');
                return;
            }

            // å¦‚æœåœ¨å¾®ä¿¡ä¸­ï¼Œä½¿ç”¨å¾®ä¿¡å†…ç½®åœ°å›¾ï¼ˆè…¾è®¯åœ°å›¾URIï¼‰
            if (isWeChat()) {
                // ä½¿ç”¨è…¾è®¯åœ°å›¾URIï¼Œå¾®ä¿¡ä¼šè‡ªåŠ¨è°ƒç”¨å†…ç½®åœ°å›¾
                const url = `https://apis.map.qq.com/uri/v1/marker?marker=coord:${lat},${lng};title:${encodeURIComponent(name)};addr:${encodeURIComponent(name)}`;
                window.location.href = url;
                console.log('æ‰“å¼€å¾®ä¿¡åœ°å›¾ï¼š', url);
            } else {
                // ä¸åœ¨å¾®ä¿¡ä¸­ï¼Œä½¿ç”¨è…¾è®¯åœ°å›¾ç½‘é¡µç‰ˆ
                const url = `https://apis.map.qq.com/uri/v1/marker?marker=coord:${lat},${lng};title:${encodeURIComponent(name)};addr:${encodeURIComponent(name)}`;
                window.open(url, '_blank');
                console.log('æ‰“å¼€è…¾è®¯åœ°å›¾ï¼š', url);
            }
        }

        // å¯¼èˆªå‡½æ•°
        function openNavigation(mapType) {
            let url = '';
            let lng = LOCATION_COORDINATES.longitude;
            let lat = LOCATION_COORDINATES.latitude;
            const name = LOCATION_NAME;  // ä½¿ç”¨åŸå§‹åç§°ï¼Œä¸åœ¨è¿™é‡Œç¼–ç 
            
            // è‡ªåŠ¨æ£€æµ‹å¹¶ä¿®å¤å¯èƒ½çš„åæ ‡åè½¬é—®é¢˜
            if (lng && lat) {
                // å¦‚æœç»åº¦åœ¨çº¬åº¦èŒƒå›´å†…ï¼ˆ18-54ï¼‰ï¼Œä¸”çº¬åº¦åœ¨ç»åº¦èŒƒå›´å†…ï¼ˆ73-135ï¼‰ï¼Œåˆ™äº¤æ¢
                if (lng >= 18 && lng <= 54 && lat >= 73 && lat <= 135) {
                    console.warn('è‡ªåŠ¨ä¿®å¤ï¼šæ£€æµ‹åˆ°ç»çº¬åº¦å¯èƒ½å¡«åï¼Œå·²è‡ªåŠ¨äº¤æ¢');
                    const temp = lng;
                    lng = lat;
                    lat = temp;
                }
            }

            // å¦‚æœåœ¨å¾®ä¿¡ä¸­ï¼Œä¼˜å…ˆä½¿ç”¨å¾®ä¿¡å†…ç½®åœ°å›¾ï¼ˆè…¾è®¯åœ°å›¾ï¼‰
            if (isWeChat() && lng && lat) {
                // æ–¹æ¡ˆ1ï¼šä½¿ç”¨å¾®ä¿¡JS-SDKçš„wx.openLocationï¼ˆæ¨èï¼Œéœ€è¦é…ç½®JS-SDKï¼‰
                // å¦‚æœé…ç½®äº†å¾®ä¿¡JS-SDKï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç ï¼ˆå–æ¶ˆæ³¨é‡Šå¹¶é…ç½®ï¼‰
                /*
                if (typeof wx !== 'undefined' && wx.openLocation) {
                    wx.openLocation({
                        latitude: lat,
                        longitude: lng,
                        name: name,
                        address: name,
                        scale: 18,
                        infoUrl: ''
                    });
                    return;
                }
                */
                
                // æ–¹æ¡ˆ2ï¼šä½¿ç”¨è…¾è®¯åœ°å›¾URIï¼ˆå¾®ä¿¡å†…ç½®ä¼šå¾ˆå¥½åœ°å¤„ç†ï¼Œæ— éœ€é…ç½®ï¼‰
                // åœ¨å¾®ä¿¡ä¸­ï¼Œè…¾è®¯åœ°å›¾URIä¼šä¼˜å…ˆè°ƒç”¨å¾®ä¿¡å†…ç½®åœ°å›¾
                url = `https://apis.map.qq.com/uri/v1/marker?marker=coord:${lat},${lng};title:${encodeURIComponent(name)};addr:${encodeURIComponent(name)}`;
                
                // å¤‡ç”¨æ–¹æ¡ˆï¼šå¯¼èˆªè·¯çº¿ï¼ˆå¦‚æœéœ€è¦å¯¼èˆªåŠŸèƒ½ï¼Œå–æ¶ˆä¸‹é¢è¿™è¡Œçš„æ³¨é‡Šï¼‰
                // url = `https://apis.map.qq.com/uri/v1/route?type=drive&to=${lat},${lng}&tocoord=${lat},${lng}&toname=${encodeURIComponent(name)}`;
                
                console.log('å¾®ä¿¡ä¸­æ‰“å¼€åœ°å›¾ï¼š', {
                    longitude: lng,
                    latitude: lat,
                    name: name,
                    url: url
                });
                
                window.location.href = url;  // åœ¨å¾®ä¿¡ä¸­ä½¿ç”¨location.hrefï¼Œè€Œä¸æ˜¯open
                return;
            }

            switch(mapType) {
                case 'amap':
                    // é«˜å¾·åœ°å›¾
                    if (lng && lat) {
                        // ä½¿ç”¨é«˜å¾·åœ°å›¾æ ‡è®°ç‚¹URIï¼ˆæœ€å¯é çš„æ–¹å¼ï¼Œæ”¯æŒç½‘é¡µå’ŒAPPï¼‰
                        // æ ¼å¼ï¼šhttps://uri.amap.com/marker?position=ç»åº¦,çº¬åº¦&name=åç§°
                        // æ³¨æ„ï¼šnameå‚æ•°éœ€è¦URLç¼–ç 
                        url = `https://uri.amap.com/marker?position=${lng},${lat}&name=${encodeURIComponent(name)}`;
                        
                        // å¦‚æœmarkeræ ¼å¼ä¸å·¥ä½œï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹å¤‡ç”¨æ–¹æ¡ˆï¼š
                        // æ–¹æ¡ˆ1ï¼šé«˜å¾·åœ°å›¾ç½‘é¡µç‰ˆæœç´¢ï¼ˆå–æ¶ˆä¸‹é¢è¿™è¡Œçš„æ³¨é‡Šï¼‰
                        // url = `https://ditu.amap.com/search?query=${encodeURIComponent(name)}&city=&geoobj=${lng}%7C${lat}`;
                        
                        // æ–¹æ¡ˆ2ï¼šç§»åŠ¨ç«¯å¯¼èˆªï¼ˆå–æ¶ˆä¸‹é¢è¿™è¡Œçš„æ³¨é‡Šï¼Œå¦‚æœç”¨æˆ·å®‰è£…äº†é«˜å¾·APPï¼‰
                        // url = `https://uri.amap.com/navigation?to=${lng},${lat}&toName=${encodeURIComponent(name)}&mode=car&src=mypage`;
                        
                        // è°ƒè¯•ä¿¡æ¯ï¼ˆæŒ‰F12æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹ï¼‰
                        console.log('é«˜å¾·åœ°å›¾å¯¼èˆªï¼š', {
                            longitude: lng,
                            latitude: lat,
                            name: name,
                            url: url
                        });
                    } else {
                        // ä½¿ç”¨åœ°ç‚¹åç§°æœç´¢
                        url = `https://uri.amap.com/search?query=${encodeURIComponent(name)}`;
                    }
                    break;

                case 'baidu':
                    // ç™¾åº¦åœ°å›¾
                    if (lng && lat) {
                        url = `https://api.map.baidu.com/direction?destination=latlng:${lat},${lng}|name:${encodeURIComponent(name)}&mode=driving&coord_type=gcj02`;
                    } else {
                        url = `https://map.baidu.com/search/${encodeURIComponent(name)}/@${lng || 116.397128},${lat || 39.916527},13z`;
                    }
                    break;

                case 'tencent':
                    // è…¾è®¯åœ°å›¾
                    if (lng && lat) {
                        url = `https://apis.map.qq.com/uri/v1/route?type=drive&to=${lat},${lng}&tocoord=${lat},${lng}&toname=${encodeURIComponent(name)}`;
                    } else {
                        url = `https://map.qq.com/search/${encodeURIComponent(name)}`;
                    }
                    break;

                case 'apple':
                    // è‹¹æœåœ°å›¾
                    if (lng && lat) {
                        url = `http://maps.apple.com/?daddr=${lat},${lng}&dirflg=d`;
                    } else {
                        url = `http://maps.apple.com/?q=${encodeURIComponent(name)}`;
                    }
                    break;

                case 'google':
                    // è°·æ­Œåœ°å›¾
                    if (lng && lat) {
                        url = `https://www.google.com/maps/dir/?api=1&destination=${lat},${lng}&destination_place_id=${name}`;
                    } else {
                        url = `https://www.google.com/maps/search/?api=1&query=${name}`;
                    }
                    break;
            }

            if (url) {
                window.open(url, '_blank');
            }
        }

        // æ£€æµ‹è®¾å¤‡ç±»å‹ï¼Œè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„åœ°å›¾
        function detectDeviceAndSuggestMap() {
            const userAgent = navigator.userAgent || navigator.vendor || window.opera;
            
            if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
                // iOSè®¾å¤‡ï¼Œä¼˜å…ˆæ˜¾ç¤ºè‹¹æœåœ°å›¾
                console.log('æ£€æµ‹åˆ°iOSè®¾å¤‡ï¼Œå»ºè®®ä½¿ç”¨è‹¹æœåœ°å›¾');
            } else if (/android/i.test(userAgent)) {
                // Androidè®¾å¤‡ï¼Œä¼˜å…ˆæ˜¾ç¤ºé«˜å¾·æˆ–ç™¾åº¦
                console.log('æ£€æµ‹åˆ°Androidè®¾å¤‡ï¼Œå»ºè®®ä½¿ç”¨é«˜å¾·æˆ–ç™¾åº¦åœ°å›¾');
            }
        }

        // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ
        document.addEventListener('DOMContentLoaded', function() {
            detectDeviceAndSuggestMap();
            updateWeChatShareMeta();
            optimizeNavigationForWeChat();
            
            // å¦‚æœåœ¨å¾®ä¿¡ä¸­ï¼Œæ·»åŠ æç¤º
            if (isWeChat()) {
                console.log('å¾®ä¿¡ä¸­æ‰“å¼€ï¼Œåˆ†äº«åŠŸèƒ½å·²ä¼˜åŒ–');
                // å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ å¾®ä¿¡JS-SDKçš„åˆå§‹åŒ–ï¼ˆéœ€è¦ç”³è¯·å¾®ä¿¡å¼€å‘è€…è´¦å·ï¼‰
            }
        });

        // å¤„ç†å›¾ç‰‡åŠ è½½å¤±è´¥
        document.getElementById('invitationImage').addEventListener('error', function() {
            console.error('è¯·æŸ¬å›¾ç‰‡åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥å›¾ç‰‡URLæ˜¯å¦æ­£ç¡®');
            this.alt = 'è¯·æŸ¬å›¾ç‰‡';
        });

        // é˜»æ­¢å¾®ä¿¡ä¸­çš„é•¿æŒ‰ä¿å­˜å›¾ç‰‡ï¼ˆå¯é€‰ï¼‰
        if (isWeChat()) {
            document.addEventListener('contextmenu', function(e) {
                e.preventDefault();
            });
        }
    </script>
</body>
</html>

