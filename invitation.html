<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <!-- åŸºç¡€ä¿¡æ¯ -->
    <title>æ´»åŠ¨è¯·æŸ¬</title>
    <meta name="description" content="æ¬¢è¿å‚åŠ æˆ‘ä»¬çš„æ´»åŠ¨ï¼">
    
    <!-- å¾®ä¿¡åˆ†äº« Meta æ ‡ç­¾ï¼ˆOpen Graphåè®®ï¼Œå¾®ä¿¡ä¼šæ ¹æ®è¿™äº›æ ‡ç­¾ç”Ÿæˆåˆ†äº«é¢„è§ˆå¡ç‰‡ï¼‰ -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="æ´»åŠ¨è¯·æŸ¬">
    <meta property="og:description" content="æ¬¢è¿å‚åŠ æˆ‘ä»¬çš„æ´»åŠ¨ï¼ç‚¹å‡»æŸ¥çœ‹æ´»åŠ¨åœ°ç‚¹å’Œå¯¼èˆªä¿¡æ¯ã€‚">
    <!-- æ³¨æ„ï¼šå›¾ç‰‡URLä¼šåœ¨é¡µé¢åŠ è½½æ—¶é€šè¿‡JavaScriptæ›´æ–°ä¸ºå®é™…å›¾ç‰‡ -->
    <meta property="og:image" content="https://uuumr.github.io/engagement-invitation/invitation_card_low.jpg">
    <meta property="og:url" content="">
    <meta property="og:site_name" content="æ´»åŠ¨è¯·æŸ¬">
    <!-- å›¾ç‰‡å°ºå¯¸æç¤ºï¼ˆå¾®ä¿¡æ¨èå›¾ç‰‡ä¸å°äº300x300åƒç´ ï¼Œæœ€å¥½æ˜¯1:1æ¯”ä¾‹ï¼‰ -->
    <meta property="og:image:width" content="600">
    <meta property="og:image:height" content="400">
    
    <!-- å¾®ä¿¡ç‰¹æ®Šæ ‡ç­¾ï¼ˆä¼˜å…ˆçº§æ›´é«˜ï¼Œå¾®ä¿¡ä¹Ÿä¼šè¯»å–è¿™äº›ï¼‰ -->
    <meta itemprop="name" content="æ´»åŠ¨è¯·æŸ¬">
    <meta itemprop="description" content="æ¬¢è¿å‚åŠ æˆ‘ä»¬çš„æ´»åŠ¨ï¼ç‚¹å‡»æŸ¥çœ‹æ´»åŠ¨åœ°ç‚¹å’Œå¯¼èˆªä¿¡æ¯ã€‚">
    <meta itemprop="image" content="https://uuumr.github.io/engagement-invitation/invitation_card_low.jpg">
    
    <!-- å¾®ä¿¡åˆ†äº«ä¸“ç”¨æ ‡ç­¾ï¼ˆè¡¥å……ï¼Œç¡®ä¿å…¼å®¹æ€§ï¼‰ -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="æ´»åŠ¨è¯·æŸ¬">
    <meta name="twitter:description" content="æ¬¢è¿å‚åŠ æˆ‘ä»¬çš„æ´»åŠ¨ï¼ç‚¹å‡»æŸ¥çœ‹æ´»åŠ¨åœ°ç‚¹å’Œå¯¼èˆªä¿¡æ¯ã€‚">
    <meta name="twitter:image" content="https://uuumr.github.io/engagement-invitation/invitation_card_low.jpg">
    
    <!-- å…¼å®¹å¾®ä¿¡æµè§ˆå™¨ -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- å¾®ä¿¡JS-SDKï¼ˆç”¨äºè°ƒç”¨å¾®ä¿¡å†…ç½®åœ°å›¾å’Œåˆ†äº«åŠŸèƒ½ï¼‰ -->
    <script src="https://res.wx.qq.com/open/js/jweixin-1.6.0.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
            background: white;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            -webkit-overflow-scrolling: touch;
            /* é˜²æ­¢å¾®ä¿¡ä¸­ä¸‹æ‹‰å‡ºç°èƒŒæ™¯ */
            overscroll-behavior-y: none;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            max-width: 600px;
            width: 100%;
            overflow: hidden;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .image-container {
            width: 100%;
            position: relative;
            overflow: hidden;
        }

        .invitation-image {
            width: 100%;
            height: auto;
            display: block;
            object-fit: cover;
            image-rendering: -webkit-optimize-contrast;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }

        .location-section {
            padding: 30px;
            text-align: center;
        }

        .location-title {
            font-size: 24px;
            color: #333;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .location-address {
            font-size: 16px;
            color: #666;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        /* åœ°å›¾å›¾ç‰‡æ ·å¼ */
        .location-map-image {
            width: 100%;
            max-width: 100%;
            height: auto;
            border-radius: 12px;
            margin: 20px 0;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
            display: block;
        }

        .location-map-image:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
        }

        .location-map-image:active {
            transform: translateY(0);
        }

        /* åœ°å›¾é€‰æ‹©å¼¹çª—æ ·å¼ */
        .map-picker-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            display: none;
            align-items: flex-end;
            justify-content: center;
            animation: fadeInOverlay 0.3s ease;
        }

        .map-picker-overlay.show {
            display: flex;
        }

        @keyframes fadeInOverlay {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .map-picker-sheet {
            background: white;
            border-radius: 16px 16px 0 0;
            width: 100%;
            max-width: 600px;
            padding-bottom: env(safe-area-inset-bottom);
            box-shadow: 0 -2px 20px rgba(0, 0, 0, 0.1);
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                transform: translateY(100%);
            }
            to {
                transform: translateY(0);
            }
        }

        .map-picker-handle {
            width: 36px;
            height: 4px;
            background: #ddd;
            border-radius: 2px;
            margin: 12px auto;
        }

        .map-picker-options {
            padding: 8px 0;
        }

        .map-picker-option {
            display: flex;
            align-items: center;
            padding: 16px 20px;
            cursor: pointer;
            transition: background-color 0.2s ease;
            border-bottom: 1px solid #f0f0f0;
        }

        .map-picker-option:active {
            background-color: #f5f5f5;
        }

        .map-picker-option:last-child {
            border-bottom: none;
        }

        .map-picker-icon {
            font-size: 24px;
            margin-right: 12px;
            width: 32px;
            text-align: center;
        }

        .map-picker-text {
            font-size: 17px;
            color: #333;
            flex: 1;
        }

        .map-picker-cancel {
            margin: 8px 16px 16px;
            padding: 16px;
            background: #f5f5f5;
            border-radius: 12px;
            text-align: center;
            font-size: 17px;
            color: #333;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .map-picker-cancel:active {
            background-color: #e5e5e5;
        }

        .nav-buttons {
            display: none; /* éšè—å¯¼èˆªæŒ‰é’® */
            flex-wrap: wrap;
            gap: 12px;
            justify-content: center;
            margin-top: 20px;
        }

        .nav-button {
            flex: 1;
            min-width: 140px;
            padding: 14px 20px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            color: white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .nav-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
        }

        .nav-button:active {
            transform: translateY(0);
        }

        .amap {
            background: linear-gradient(135deg, #0091ff 0%, #0066cc 100%);
        }

        .baidu {
            background: linear-gradient(135deg, #3385ff 0%, #1a6fd8 100%);
        }

        .tencent {
            background: linear-gradient(135deg, #0ba58c 0%, #088a75 100%);
        }

        .apple {
            background: linear-gradient(135deg, #000000 0%, #333333 100%);
        }

        .google {
            background: linear-gradient(135deg, #4285f4 0%, #1976d2 100%);
        }

        .icon {
            width: 20px;
            height: 20px;
            display: inline-block;
        }

        /* å¾®ä¿¡æµè§ˆå™¨ä¼˜åŒ– */
        @media (max-width: 600px) {
            body {
                padding: 10px;
            }

            .container {
                border-radius: 15px;
            }

            .location-section {
                padding: 20px 15px;
            }

            .nav-button {
                min-width: 100%;
                padding: 16px 20px;
                font-size: 17px;
            }

            .location-title {
                font-size: 20px;
                margin-bottom: 12px;
            }

            .location-address {
                font-size: 15px;
                margin-bottom: 20px;
            }
        }

    </style>
</head>
<body>
    <div class="container">
        <!-- è¯·æŸ¬å›¾ç‰‡åŒºåŸŸ -->
        <div class="image-container">
            <!-- æ›¿æ¢ä¸‹é¢çš„å›¾ç‰‡URLä¸ºæ‚¨çš„è¯·æŸ¬å›¾ç‰‡ -->
            <img src="https://via.placeholder.com/600x400/667eea/ffffff?text=æ´»åŠ¨è¯·æŸ¬" 
                 alt="æ´»åŠ¨è¯·æŸ¬" 
                 class="invitation-image"
                 id="invitationImage">
        </div>

        <!-- å¯¼èˆªåŒºåŸŸ -->
        <div class="location-section">
            <h2 class="location-title">ğŸ“ æ´»åŠ¨åœ°ç‚¹</h2>
            <p class="location-address" id="locationAddress">
                åŒ—äº¬å¸‚æœé˜³åŒºXXè·¯XXå·XXå¤§å¦
            </p>
            
            <!-- å¯ç‚¹å‡»çš„åœ°å›¾å›¾ç‰‡ -->
            <img src="https://uuumr.github.io/engagement-invitation/hotel_map.png" 
                 alt="é…’åº—ä½ç½®åœ°å›¾" 
                 class="location-map-image"
                 id="locationMapImage"
                 onclick="showMapPicker(); return false;"
                 title="ç‚¹å‡»æŸ¥çœ‹åœ°å›¾ä½ç½®">
            
            <!-- åœ°å›¾é€‰æ‹©å¼¹çª— -->
            <div class="map-picker-overlay" id="mapPickerOverlay" onclick="hideMapPicker();">
                <div class="map-picker-sheet" onclick="event.stopPropagation();">
                    <div class="map-picker-handle"></div>
                    <div class="map-picker-options">
                        <div class="map-picker-option" onclick="selectMap('tencent');">
                            <span class="map-picker-icon">ğŸ§­</span>
                            <span class="map-picker-text">è…¾è®¯åœ°å›¾</span>
                        </div>
                        <div class="map-picker-option" onclick="selectMap('amap');">
                            <span class="map-picker-icon">ğŸ—ºï¸</span>
                            <span class="map-picker-text">é«˜å¾·åœ°å›¾</span>
                        </div>
                        <div class="map-picker-option" onclick="selectMap('baidu');">
                            <span class="map-picker-icon">ğŸ“</span>
                            <span class="map-picker-text">ç™¾åº¦åœ°å›¾</span>
                        </div>
                        <div class="map-picker-option" onclick="selectMap('google');">
                            <span class="map-picker-icon">ğŸŒ</span>
                            <span class="map-picker-text">è°·æ­Œåœ°å›¾</span>
                        </div>
                    </div>
                    <div class="map-picker-cancel" onclick="hideMapPicker();">å–æ¶ˆ</div>
                </div>
            </div>
            
            <div class="nav-buttons">
                <a href="#" class="nav-button amap" onclick="openNavigation('amap'); return false;">
                    <span>ğŸ—ºï¸</span>
                    <span>é«˜å¾·åœ°å›¾</span>
                </a>
                <a href="#" class="nav-button baidu" onclick="openNavigation('baidu'); return false;">
                    <span>ğŸ“</span>
                    <span>ç™¾åº¦åœ°å›¾</span>
                </a>
                <a href="#" class="nav-button tencent" onclick="openNavigation('tencent'); return false;">
                    <span>ğŸ§­</span>
                    <span>è…¾è®¯åœ°å›¾</span>
                </a>
                <a href="#" class="nav-button apple" onclick="openNavigation('apple'); return false;">
                    <span>ğŸ</span>
                    <span>è‹¹æœåœ°å›¾</span>
                </a>
                <a href="#" class="nav-button google" onclick="openNavigation('google'); return false;">
                    <span>ğŸŒ</span>
                    <span>è°·æ­Œåœ°å›¾</span>
                </a>
            </div>
        </div>
    </div>

    <script>
        // ==================== é…ç½®åŒºåŸŸ ====================
        // è¯·ä¿®æ”¹ä»¥ä¸‹é…ç½®ä¸ºæ‚¨å®é™…çš„åœ°ç‚¹ä¿¡æ¯

        // åœ°ç‚¹åç§°ï¼ˆç”¨äºåœ°å›¾æœç´¢ï¼‰
        const LOCATION_NAME = "æ¹–å·æ°´å²¸èŠ±å›­å¤§é…’åº—(åŒæ—å¤é•‡æ™¯åŒºåº—)";

        // ==================== åæ ‡è®¾ç½® ====================
        // ç»çº¬åº¦åæ ‡ï¼ˆå»ºè®®å¡«å†™ï¼Œæå‡å®šä½ç²¾åº¦ï¼‰
        // 
        // ğŸ“ å¦‚ä½•è·å–åæ ‡ï¼š
        // 1. æ‰“å¼€é«˜å¾·åœ°å›¾ç½‘é¡µï¼šhttps://lbs.amap.com/tools/picker
        // 2. ç‚¹å‡»åœ°å›¾ä¸Šçš„ä½ç½®ï¼Œå³ä¾§ä¼šæ˜¾ç¤ºåæ ‡ï¼Œæ ¼å¼å¦‚ï¼š116.397128,39.916527
        // 3. âš ï¸ æ³¨æ„ï¼šé«˜å¾·åœ°å›¾æ˜¾ç¤ºçš„æ˜¯"ç»åº¦,çº¬åº¦"æ ¼å¼
        //    ç¬¬ä¸€ä¸ªæ•°å­—æ˜¯ç»åº¦ï¼ˆå¡«åˆ°longitudeï¼‰ï¼Œç¬¬äºŒä¸ªæ•°å­—æ˜¯çº¬åº¦ï¼ˆå¡«åˆ°latitudeï¼‰
        // 4. åˆ¤æ–­æ–¹æ³•ï¼š
        //    - ç»åº¦(longitude)ï¼šé€šå¸¸æ˜¯å¤§æ•°å­—ï¼ˆä¸­å›½ï¼š100-135ï¼‰
        //    - çº¬åº¦(latitude)ï¼šé€šå¸¸æ˜¯å°æ•°å­—ï¼ˆä¸­å›½ï¼š18-54ï¼‰
        //
        // æˆ–è€…ï¼šå¦‚æœä¸è®¾ç½®åæ ‡ï¼Œä¹Ÿå¯ä»¥åªä½¿ç”¨åœ°ç‚¹åç§°ï¼ˆä½†å®šä½å¯èƒ½ä¸å¤Ÿç²¾ç¡®ï¼‰
        // 
        // ç¤ºä¾‹åæ ‡ï¼š
        // åŒ—äº¬å¤©å®‰é—¨: longitude: 116.397128, latitude: 39.916527
        // ä¸Šæµ·å¤–æ»©:   longitude: 121.487899, latitude: 31.239666
        // 
        const LOCATION_COORDINATES = {
            longitude: 120.332731,  // ç»åº¦ï¼ˆä¸œç»ï¼Œä¸­å›½é€šå¸¸ä¸º116-124ä¹‹é—´ï¼‰
            latitude: 30.772340     // çº¬åº¦ï¼ˆåŒ—çº¬ï¼Œä¸­å›½é€šå¸¸ä¸º18-54ä¹‹é—´ï¼‰
        };
        //
        // å¦‚æœæ²¡æœ‰åæ ‡ï¼Œå¯ä»¥è®¾ç½®ä¸º nullï¼ˆä¸æ¨èï¼‰ï¼š
        // longitude: null,
        // latitude: null

        // è¯·æŸ¬å›¾ç‰‡URLï¼ˆæ›¿æ¢ä¸ºæ‚¨è‡ªå·±çš„å›¾ç‰‡é“¾æ¥ï¼‰
        const INVITATION_IMAGE_URL = "https://uuumr.github.io/engagement-invitation/invitation_card_low.jpg";

        // å¾®ä¿¡åˆ†äº«é…ç½®ï¼ˆè¯·ä¿®æ”¹è¿™äº›ä¿¡æ¯ï¼‰
        const SHARE_CONFIG = {
            title: "æ´»åŠ¨è¯·æŸ¬",
            desc: "æ¬¢è¿å‚åŠ æˆ‘ä»¬çš„æ´»åŠ¨ï¼",
            imgUrl: INVITATION_IMAGE_URL  // åˆ†äº«é¢„è§ˆå›¾çš„URLï¼Œå»ºè®®å°ºå¯¸ï¼š300x300 æˆ–æ›´å¤§
        };

        // ==================== ä»£ç åŒºåŸŸï¼ˆæ— éœ€ä¿®æ”¹ï¼‰====================

        // åæ ‡éªŒè¯å‡½æ•°ï¼ˆæ£€æŸ¥ç»çº¬åº¦æ˜¯å¦å¡«åï¼‰
        function validateCoordinates() {
            const lng = LOCATION_COORDINATES.longitude;
            const lat = LOCATION_COORDINATES.latitude;
            
            if (lng && lat) {
                // ä¸­å›½ç»åº¦èŒƒå›´ï¼š73-135ï¼ˆä¸œç»ï¼‰
                // ä¸­å›½çº¬åº¦èŒƒå›´ï¼š18-54ï¼ˆåŒ—çº¬ï¼‰
                // å¦‚æœå‘ç°åæ ‡å¯èƒ½å¡«åäº†ï¼Œç»™å‡ºæç¤º
                if (lng > 18 && lng < 54 && lat > 73 && lat < 135) {
                    console.warn('âš ï¸ è­¦å‘Šï¼šç»çº¬åº¦å¯èƒ½å¡«åäº†ï¼');
                    console.warn('   ç»åº¦(longitude)åº”è¯¥åœ¨ 73-135 ä¹‹é—´ï¼ˆå½“å‰ï¼š' + lng + 'ï¼‰');
                    console.warn('   çº¬åº¦(latitude)åº”è¯¥åœ¨ 18-54 ä¹‹é—´ï¼ˆå½“å‰ï¼š' + lat + 'ï¼‰');
                    console.warn('   è¯·æ£€æŸ¥åæ ‡æ˜¯å¦æ­£ç¡®ï¼');
                } else if (lng < 73 || lng > 135) {
                    console.warn('âš ï¸ è­¦å‘Šï¼šç»åº¦(longitude)å€¼å¼‚å¸¸ï¼ä¸­å›½ç»åº¦é€šå¸¸åœ¨ 73-135 ä¹‹é—´ï¼Œå½“å‰å€¼ï¼š' + lng);
                } else if (lat < 18 || lat > 54) {
                    console.warn('âš ï¸ è­¦å‘Šï¼šçº¬åº¦(latitude)å€¼å¼‚å¸¸ï¼ä¸­å›½çº¬åº¦é€šå¸¸åœ¨ 18-54 ä¹‹é—´ï¼Œå½“å‰å€¼ï¼š' + lat);
                }
            }
        }

        // åˆå§‹åŒ–å›¾ç‰‡
        document.getElementById('invitationImage').src = INVITATION_IMAGE_URL;
        document.getElementById('locationAddress').textContent = LOCATION_NAME;
        
        // éªŒè¯åæ ‡
        validateCoordinates();

        // æ›´æ–°å¾®ä¿¡åˆ†äº«çš„metaæ ‡ç­¾
        function updateWeChatShareMeta() {
            const titleMeta = document.querySelector('meta[property="og:title"]');
            const descMeta = document.querySelector('meta[property="og:description"]');
            const imgMeta = document.querySelector('meta[property="og:image"]');
            const urlMeta = document.querySelector('meta[property="og:url"]');

            if (titleMeta) titleMeta.setAttribute('content', SHARE_CONFIG.title);
            if (descMeta) descMeta.setAttribute('content', SHARE_CONFIG.desc);
            if (imgMeta) {
                // ç¡®ä¿å›¾ç‰‡URLæ˜¯å®Œæ•´çš„HTTPSé“¾æ¥ï¼ˆå¾®ä¿¡è¦æ±‚å¿…é¡»ä½¿ç”¨HTTPSï¼‰
                // æ·»åŠ æ—¶é—´æˆ³å‚æ•°é˜²æ­¢ç¼“å­˜ï¼Œç¡®ä¿åˆ†äº«æ—¶æ˜¾ç¤ºæœ€æ–°å›¾ç‰‡
                let imageUrl = SHARE_CONFIG.imgUrl;
                if (imageUrl && imageUrl.indexOf('http') === 0) {
                    // å·²ç»æ˜¯å®Œæ•´URLï¼Œæ·»åŠ ç‰ˆæœ¬å·é˜²æ­¢ç¼“å­˜
                    const separator = imageUrl.indexOf('?') > -1 ? '&' : '?';
                    imageUrl = imageUrl + separator + '_v=' + new Date().getTime();
                }
                imgMeta.setAttribute('content', imageUrl);
            }
            if (urlMeta) {
                const currentUrl = window.location.href || window.location.protocol + '//' + window.location.host + window.location.pathname;
                urlMeta.setAttribute('content', currentUrl);
            }

            // æ›´æ–°itempropï¼ˆå¾®ä¿¡ä¹Ÿä¼šè¯»å–è¿™äº›æ ‡ç­¾ï¼‰
            const itemName = document.querySelector('meta[itemprop="name"]');
            const itemDesc = document.querySelector('meta[itemprop="description"]');
            const itemImg = document.querySelector('meta[itemprop="image"]');
            
            if (itemName) itemName.setAttribute('content', SHARE_CONFIG.title);
            if (itemDesc) itemDesc.setAttribute('content', SHARE_CONFIG.desc);
            if (itemImg) {
                let imageUrl = SHARE_CONFIG.imgUrl;
                if (imageUrl && imageUrl.indexOf('http') === 0) {
                    const separator = imageUrl.indexOf('?') > -1 ? '&' : '?';
                    imageUrl = imageUrl + separator + '_v=' + new Date().getTime();
                }
                itemImg.setAttribute('content', imageUrl);
            }
            
            // æ›´æ–°title
            document.title = SHARE_CONFIG.title;
            
            // è¾“å‡ºè°ƒè¯•ä¿¡æ¯ï¼ˆæŒ‰F12æ‰“å¼€æ§åˆ¶å°æŸ¥çœ‹ï¼‰
            console.log('âœ… å¾®ä¿¡åˆ†äº«é…ç½®å·²æ›´æ–°ï¼š', {
                title: SHARE_CONFIG.title,
                desc: SHARE_CONFIG.desc,
                imgUrl: SHARE_CONFIG.imgUrl,
                currentUrl: window.location.href
            });
        }

        // æ£€æµ‹æ˜¯å¦åœ¨å¾®ä¿¡ä¸­æ‰“å¼€
        function isWeChat() {
            const ua = navigator.userAgent.toLowerCase();
            return /micromessenger/i.test(ua);
        }

        // å¾®ä¿¡ä¸­ä¼˜åŒ–å¯¼èˆªæŒ‰é’®ç‚¹å‡»
        function optimizeNavigationForWeChat() {
            const navButtons = document.querySelectorAll('.nav-button');
            navButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    // å¾®ä¿¡ä¸­ç‚¹å‡»åå¯èƒ½éœ€è¦ç”¨æˆ·æ‰‹åŠ¨æ‰“å¼€åœ°å›¾åº”ç”¨
                    if (isWeChat()) {
                        // å¯ä»¥æ·»åŠ æç¤º
                        console.log('å¾®ä¿¡ä¸­æ‰“å¼€åœ°å›¾ï¼Œå¯èƒ½éœ€è¦è·³è½¬åˆ°æµè§ˆå™¨');
                    }
                });
            });
        }

        // æ˜¾ç¤ºåœ°å›¾é€‰æ‹©å™¨
        function showMapPicker() {
            const overlay = document.getElementById('mapPickerOverlay');
            if (overlay) {
                overlay.classList.add('show');
                // é˜²æ­¢èƒŒæ™¯æ»šåŠ¨
                document.body.style.overflow = 'hidden';
            }
        }

        // éšè—åœ°å›¾é€‰æ‹©å™¨
        function hideMapPicker() {
            const overlay = document.getElementById('mapPickerOverlay');
            if (overlay) {
                overlay.classList.remove('show');
                // æ¢å¤èƒŒæ™¯æ»šåŠ¨
                document.body.style.overflow = '';
            }
        }

        // é€‰æ‹©åœ°å›¾å¹¶æ‰“å¼€
        function selectMap(mapType) {
            hideMapPicker();
            openNavigation(mapType);
        }

        // å¯¼èˆªå‡½æ•°
        function openNavigation(mapType) {
            let url = '';
            let lng = LOCATION_COORDINATES.longitude;
            let lat = LOCATION_COORDINATES.latitude;
            const name = LOCATION_NAME;  // ä½¿ç”¨åŸå§‹åç§°ï¼Œä¸åœ¨è¿™é‡Œç¼–ç 
            
            // è‡ªåŠ¨æ£€æµ‹å¹¶ä¿®å¤å¯èƒ½çš„åæ ‡åè½¬é—®é¢˜
            if (lng && lat) {
                // å¦‚æœç»åº¦åœ¨çº¬åº¦èŒƒå›´å†…ï¼ˆ18-54ï¼‰ï¼Œä¸”çº¬åº¦åœ¨ç»åº¦èŒƒå›´å†…ï¼ˆ73-135ï¼‰ï¼Œåˆ™äº¤æ¢
                if (lng >= 18 && lng <= 54 && lat >= 73 && lat <= 135) {
                    console.warn('è‡ªåŠ¨ä¿®å¤ï¼šæ£€æµ‹åˆ°ç»çº¬åº¦å¯èƒ½å¡«åï¼Œå·²è‡ªåŠ¨äº¤æ¢');
                    const temp = lng;
                    lng = lat;
                    lat = temp;
                }
            }

            switch(mapType) {
                case 'amap':
                    // é«˜å¾·åœ°å›¾
                    if (lng && lat) {
                        // ä½¿ç”¨é«˜å¾·åœ°å›¾æ ‡è®°ç‚¹URIï¼ˆæœ€å¯é çš„æ–¹å¼ï¼Œæ”¯æŒç½‘é¡µå’ŒAPPï¼‰
                        // æ ¼å¼ï¼šhttps://uri.amap.com/marker?position=ç»åº¦,çº¬åº¦&name=åç§°
                        // æ³¨æ„ï¼šnameå‚æ•°éœ€è¦URLç¼–ç 
                        url = `https://uri.amap.com/marker?position=${lng},${lat}&name=${encodeURIComponent(name)}`;
                        
                        // å¦‚æœmarkeræ ¼å¼ä¸å·¥ä½œï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹å¤‡ç”¨æ–¹æ¡ˆï¼š
                        // æ–¹æ¡ˆ1ï¼šé«˜å¾·åœ°å›¾ç½‘é¡µç‰ˆæœç´¢ï¼ˆå–æ¶ˆä¸‹é¢è¿™è¡Œçš„æ³¨é‡Šï¼‰
                        // url = `https://ditu.amap.com/search?query=${encodeURIComponent(name)}&city=&geoobj=${lng}%7C${lat}`;
                        
                        // æ–¹æ¡ˆ2ï¼šç§»åŠ¨ç«¯å¯¼èˆªï¼ˆå–æ¶ˆä¸‹é¢è¿™è¡Œçš„æ³¨é‡Šï¼Œå¦‚æœç”¨æˆ·å®‰è£…äº†é«˜å¾·APPï¼‰
                        // url = `https://uri.amap.com/navigation?to=${lng},${lat}&toName=${encodeURIComponent(name)}&mode=car&src=mypage`;
                        
                        // è°ƒè¯•ä¿¡æ¯ï¼ˆæŒ‰F12æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹ï¼‰
                        console.log('é«˜å¾·åœ°å›¾å¯¼èˆªï¼š', {
                            longitude: lng,
                            latitude: lat,
                            name: name,
                            url: url
                        });
                    } else {
                        // ä½¿ç”¨åœ°ç‚¹åç§°æœç´¢
                        url = `https://uri.amap.com/search?query=${encodeURIComponent(name)}`;
                    }
                    break;

                case 'baidu':
                    // ç™¾åº¦åœ°å›¾
                    if (lng && lat) {
                        // ä½¿ç”¨ç™¾åº¦åœ°å›¾æ ‡è®°ç‚¹URIï¼ˆæ”¯æŒç½‘é¡µå’ŒAPPï¼‰
                        // æ ¼å¼ï¼šhttps://api.map.baidu.com/marker?location=çº¬åº¦,ç»åº¦&title=åç§°&content=åœ°å€
                        url = `https://api.map.baidu.com/marker?location=${lat},${lng}&title=${encodeURIComponent(name)}&content=${encodeURIComponent(name)}&output=html&src=webapp`;
                    } else {
                        // ä½¿ç”¨åœ°ç‚¹åç§°æœç´¢
                        url = `https://map.baidu.com/?newmap=1&ie=utf-8&s=s%26wd=${encodeURIComponent(name)}`;
                    }
                    break;

                case 'tencent':
                    // è…¾è®¯åœ°å›¾
                    if (lng && lat) {
                        // ä½¿ç”¨marker APIï¼ˆç»Ÿä¸€ä½¿ç”¨ï¼Œæ”¯æŒå¾®ä¿¡å’Œéå¾®ä¿¡ç¯å¢ƒï¼‰
                        // marker APIä¼šæ˜¾ç¤ºæ ‡è®°ç‚¹ï¼Œç”¨æˆ·å¯ä»¥ç‚¹å‡»æ ‡è®°ç‚¹ä¸Šçš„å¯¼èˆªæŒ‰é’®è¿›è¡Œå¯¼èˆª
                        // åœ¨å¾®ä¿¡ä¸­ä¼šè‡ªåŠ¨è°ƒç”¨å¾®ä¿¡å†…ç½®åœ°å›¾
                        url = `https://apis.map.qq.com/uri/v1/marker?marker=coord:${lat},${lng};title:${encodeURIComponent(name)};addr:${encodeURIComponent(name)}`;
                    } else {
                        // ä½¿ç”¨åœ°ç‚¹åç§°æœç´¢
                        url = `https://map.qq.com/search/${encodeURIComponent(name)}`;
                    }
                    break;

                case 'apple':
                    // è‹¹æœåœ°å›¾
                    if (lng && lat) {
                        // ä¼˜å…ˆå°è¯•ä½¿ç”¨maps:// URI schemeï¼ˆç›´æ¥æ‰“å¼€iOSåœ°å›¾åº”ç”¨ï¼‰
                        // å¦‚æœå¤±è´¥ï¼Œä¼šfallbackåˆ°http://maps.apple.com
                        // æ ¼å¼ï¼šmaps://?ll=çº¬åº¦,ç»åº¦&q=åç§°
                        url = `maps://?ll=${lat},${lng}&q=${encodeURIComponent(name)}`;
                        
                        // æ£€æµ‹æ˜¯å¦æ˜¯iOSè®¾å¤‡ï¼Œå¦‚æœä¸æ˜¯ï¼Œä½¿ç”¨ç½‘é¡µç‰ˆ
                        const userAgent = navigator.userAgent || navigator.vendor || window.opera;
                        if (!/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
                            // éiOSè®¾å¤‡ï¼Œä½¿ç”¨ç½‘é¡µç‰ˆï¼ˆä½†å¯èƒ½è¢«é‡å®šå‘åˆ°é«˜å¾·ï¼‰
                            url = `http://maps.apple.com/?ll=${lat},${lng}&q=${encodeURIComponent(name)}`;
                        }
                    } else {
                        // ä½¿ç”¨åœ°ç‚¹åç§°æœç´¢
                        const userAgent = navigator.userAgent || navigator.vendor || window.opera;
                        if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
                            url = `maps://?q=${encodeURIComponent(name)}`;
                        } else {
                            url = `http://maps.apple.com/?q=${encodeURIComponent(name)}`;
                        }
                    }
                    break;

                case 'google':
                    // è°·æ­Œåœ°å›¾
                    if (lng && lat) {
                        // ä½¿ç”¨è°·æ­Œåœ°å›¾å¯¼èˆªAPIï¼Œå°†ä¸­æ–‡åç§°å’Œåæ ‡ç»„åˆä½œä¸ºdestination
                        // è¿™æ ·å¯ä»¥ç¡®ä¿ä¸­æ–‡åç§°æ­£ç¡®æ˜¾ç¤ºä¸”å¯¼èˆªåˆ°å‡†ç¡®ä½ç½®
                        url = `https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(name + ' ' + lat + ',' + lng)}&travelmode=driving`;
                    } else {
                        // ä½¿ç”¨åœ°ç‚¹åç§°æœç´¢ï¼ˆæ­£ç¡®ç¼–ç ä¸­æ–‡ï¼‰
                        url = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(name)}`;
                    }
                    break;
            }

            if (url) {
                // ç‰¹æ®Šå¤„ç†ï¼šæŸäº›åœ°å›¾éœ€è¦ä½¿ç”¨location.hrefè€Œä¸æ˜¯open
                if (isWeChat() && mapType === 'tencent') {
                    // å¾®ä¿¡ä¸­é€‰æ‹©è…¾è®¯åœ°å›¾
                    window.location.href = url;
                } else if (mapType === 'apple') {
                    // è‹¹æœåœ°å›¾ï¼šä½¿ç”¨location.hrefç¡®ä¿èƒ½æ­£ç¡®æ‰“å¼€åŸç”Ÿåº”ç”¨
                    window.location.href = url;
                } else {
                    window.open(url, '_blank');
                }
            }
        }

        // æ£€æµ‹è®¾å¤‡ç±»å‹ï¼Œè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„åœ°å›¾
        function detectDeviceAndSuggestMap() {
            const userAgent = navigator.userAgent || navigator.vendor || window.opera;
            
            if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
                // iOSè®¾å¤‡ï¼Œä¼˜å…ˆæ˜¾ç¤ºè‹¹æœåœ°å›¾
                console.log('æ£€æµ‹åˆ°iOSè®¾å¤‡ï¼Œå»ºè®®ä½¿ç”¨è‹¹æœåœ°å›¾');
            } else if (/android/i.test(userAgent)) {
                // Androidè®¾å¤‡ï¼Œä¼˜å…ˆæ˜¾ç¤ºé«˜å¾·æˆ–ç™¾åº¦
                console.log('æ£€æµ‹åˆ°Androidè®¾å¤‡ï¼Œå»ºè®®ä½¿ç”¨é«˜å¾·æˆ–ç™¾åº¦åœ°å›¾');
            }
        }

        // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ
        document.addEventListener('DOMContentLoaded', function() {
            detectDeviceAndSuggestMap();
            updateWeChatShareMeta();
            optimizeNavigationForWeChat();
            
            // å¦‚æœåœ¨å¾®ä¿¡ä¸­ï¼Œæ·»åŠ æç¤º
            if (isWeChat()) {
                console.log('å¾®ä¿¡ä¸­æ‰“å¼€ï¼Œåˆ†äº«åŠŸèƒ½å·²ä¼˜åŒ–');
                // å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ å¾®ä¿¡JS-SDKçš„åˆå§‹åŒ–ï¼ˆéœ€è¦ç”³è¯·å¾®ä¿¡å¼€å‘è€…è´¦å·ï¼‰
            }
        });

        // å¤„ç†å›¾ç‰‡åŠ è½½å¤±è´¥
        document.getElementById('invitationImage').addEventListener('error', function() {
            console.error('è¯·æŸ¬å›¾ç‰‡åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥å›¾ç‰‡URLæ˜¯å¦æ­£ç¡®');
            this.alt = 'è¯·æŸ¬å›¾ç‰‡';
        });

        // é˜»æ­¢å¾®ä¿¡ä¸­çš„é•¿æŒ‰ä¿å­˜å›¾ç‰‡ï¼ˆå¯é€‰ï¼‰
        if (isWeChat()) {
            document.addEventListener('contextmenu', function(e) {
                e.preventDefault();
            });
        }
    </script>
</body>
</html>
